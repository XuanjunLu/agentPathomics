<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pathomics Viewer</title>
  <link rel="stylesheet" href="/static/css/style.css?v=20260205e">
</head>
<body>
  <div style="display:flex;align-items:center;justify-content:center;height:100vh;background:#222;color:#eee;">
    <div style="background:#fff;color:#000;padding:24px;border-radius:8px;min-width:300px;">
      <h2 style="margin-top:0">Sign in</h2>
      <div id="login-error" style="color:#c00;margin-bottom:8px;display:none"></div>
      <div style="display:flex;flex-direction:column;gap:8px">
        <input id="username" placeholder="username" value="admin" />
        <input id="password" placeholder="password" type="password" value="1234" />
        <button id="btn-login">Login</button>
      </div>
      <p style="font-size:12px;color:#555;margin-top:8px">Demo credentials: <b>admin</b> / <b>1234</b></p>
    </div>
  </div>
  <script>
    document.getElementById('btn-login').addEventListener('click', async ()=>{
      const u = document.getElementById('username').value;
      const p = document.getElementById('password').value;
      try{
        const r = await fetch('/login', { method:'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ username: u, password: p }) });
        const j = await r.json();
        if(j.ok){ window.location = '/'; return; }
        document.getElementById('login-error').style.display='block'; document.getElementById('login-error').textContent = j.error || 'Login failed';
      }catch(e){ document.getElementById('login-error').style.display='block'; document.getElementById('login-error').textContent = 'Network error'; }
    });
  </script>
</body>
</html>